[
  {
    "id": "1769565750093",
    "title": "Linux常见使用教程",
    "date": "2026-01-28",
    "tags": [
      "技术"
    ],
    "content": "# Linux 常见使用教程\n\n> 本教程面向 Linux 初学者，涵盖从基础命令到系统管理的常用知识。以 Ubuntu/Debian 系列为主，部分命令在 CentOS/RHEL 中略有不同。\n\n---\n\n## 目录\n\n1. [Linux 基础概念](#1-linux-基础概念)\n2. [文件与目录操作](#2-文件与目录操作)\n3. [文件内容查看与编辑](#3-文件内容查看与编辑)\n4. [用户与权限管理](#4-用户与权限管理)\n5. [软件包管理](#5-软件包管理)\n6. [进程管理](#6-进程管理)\n7. [网络配置与管理](#7-网络配置与管理)\n8. [磁盘与存储管理](#8-磁盘与存储管理)\n9. [系统信息查看](#9-系统信息查看)\n10. [压缩与解压](#10-压缩与解压)\n11. [Shell 脚本基础](#11-shell-脚本基础)\n12. [定时任务](#12-定时任务)\n13. [SSH 远程连接](#13-ssh-远程连接)\n14. [常用技巧与快捷键](#14-常用技巧与快捷键)\n\n---\n\n## 1. Linux 基础概念\n\n### 1.1 什么是 Linux\n\nLinux 是一个开源的类 Unix 操作系统内核，由 Linus Torvalds 于 1991 年首次发布。常见的 Linux 发行版包括：\n\n- **Ubuntu** - 适合初学者，社区活跃\n- **Debian** - 稳定可靠，Ubuntu 的上游\n- **CentOS / Rocky Linux** - 企业级服务器首选\n- **Arch Linux** - 滚动更新，适合进阶用户\n- **Fedora** - 新技术尝鲜\n\n### 1.2 Linux 目录结构\n\n```\n/\n├── bin/        # 基本命令二进制文件\n├── boot/       # 启动引导文件\n├── dev/        # 设备文件\n├── etc/        # 系统配置文件\n├── home/       # 用户主目录\n├── lib/        # 系统库文件\n├── media/      # 可移动设备挂载点\n├── mnt/        # 临时挂载点\n├── opt/        # 第三方软件\n├── proc/       # 进程信息（虚拟文件系统）\n├── root/       # root 用户主目录\n├── sbin/       # 系统管理命令\n├── tmp/        # 临时文件\n├── usr/        # 用户程序和数据\n└── var/        # 可变数据（日志、缓存等）\n```\n\n### 1.3 命令行基本格式\n\n```bash\n命令 [选项] [参数]\n\n# 示例\nls -la /home\n# ls    - 命令\n# -la   - 选项（l 长格式，a 显示隐藏文件）\n# /home - 参数（目标目录）\n```\n\n### 1.4 获取帮助\n\n```bash\n# 查看命令手册\nman ls\n\n# 查看简要帮助\nls --help\n\n# 查看命令简介\nwhatis ls\n\n# 搜索相关命令\napropos keyword\n```\n\n---\n\n## 2. 文件与目录操作\n\n### 2.1 目录导航\n\n```bash\n# 显示当前目录\npwd\n\n# 切换目录\ncd /path/to/directory    # 进入指定目录\ncd ~                     # 进入用户主目录\ncd ..                    # 返回上级目录\ncd -                     # 返回上次所在目录\ncd                       # 回到主目录（等同于 cd ~）\n\n# 示例\ncd /var/log              # 进入日志目录\npwd                      # 输出：/var/log\ncd ../..                 # 返回两级，到达 /\n```\n\n### 2.2 列出目录内容\n\n```bash\n# 基本列出\nls\n\n# 常用选项\nls -l                    # 长格式（详细信息）\nls -a                    # 显示隐藏文件（以 . 开头）\nls -la                   # 长格式 + 隐藏文件\nls -lh                   # 人性化显示文件大小\nls -lt                   # 按修改时间排序\nls -lS                   # 按文件大小排序\nls -R                    # 递归显示子目录\n\n# 示例输出解读\n# -rw-r--r-- 1 user group 4096 Jan 28 10:00 file.txt\n# │├─┤├─┤├─┤ │ │    │     │    │           └── 文件名\n# │ │  │  │  │ │    │     │    └── 修改时间\n# │ │  │  │  │ │    │     └── 文件大小\n# │ │  │  │  │ │    └── 所属组\n# │ │  │  │  │ └── 所有者\n# │ │  │  │  └── 硬链接数\n# │ │  │  └── 其他用户权限\n# │ │  └── 组权限\n# │ └── 所有者权限\n# └── 文件类型（- 普通文件，d 目录，l 链接）\n```\n\n### 2.3 创建文件和目录\n\n```bash\n# 创建空文件\ntouch filename.txt\n\n# 创建多个文件\ntouch file1.txt file2.txt file3.txt\n\n# 创建目录\nmkdir dirname\n\n# 递归创建多级目录\nmkdir -p parent/child/grandchild\n\n# 创建目录并设置权限\nmkdir -m 755 dirname\n\n# 使用大括号展开创建多个目录\nmkdir -p project/{src,docs,tests,config}\n```\n\n### 2.4 复制文件和目录\n\n```bash\n# 复制文件\ncp source.txt destination.txt\n\n# 复制到目录\ncp file.txt /path/to/directory/\n\n# 复制多个文件到目录\ncp file1.txt file2.txt /path/to/directory/\n\n# 递归复制目录\ncp -r source_dir/ destination_dir/\n\n# 保留文件属性（权限、时间等）\ncp -p source.txt destination.txt\n\n# 常用组合：递归 + 保留属性 + 显示进度\ncp -rpv source_dir/ destination_dir/\n\n# 交互式（覆盖前询问）\ncp -i source.txt destination.txt\n```\n\n### 2.5 移动和重命名\n\n```bash\n# 移动文件\nmv file.txt /path/to/directory/\n\n# 重命名文件\nmv oldname.txt newname.txt\n\n# 移动并重命名\nmv file.txt /path/to/directory/newname.txt\n\n# 移动目录\nmv source_dir/ /path/to/destination/\n\n# 交互式（覆盖前询问）\nmv -i source.txt destination.txt\n\n# 不覆盖已存在文件\nmv -n source.txt destination.txt\n```\n\n### 2.6 删除文件和目录\n\n```bash\n# 删除文件\nrm filename.txt\n\n# 删除多个文件\nrm file1.txt file2.txt file3.txt\n\n# 使用通配符删除\nrm *.log                 # 删除所有 .log 文件\n\n# 递归删除目录及内容\nrm -r dirname/\n\n# 强制删除（不提示）\nrm -f filename.txt\n\n# 递归强制删除（危险！）\nrm -rf dirname/\n\n# 交互式删除（每个文件确认）\nrm -i filename.txt\n\n# 删除空目录\nrmdir empty_dir/\n\n# ⚠️ 警告：rm -rf / 会删除整个系统，永远不要执行！\n```\n\n### 2.7 查找文件\n\n```bash\n# find 命令 - 强大的文件查找工具\nfind /path -name \"filename\"\n\n# 按名称查找（不区分大小写）\nfind /home -iname \"*.txt\"\n\n# 按类型查找\nfind /var -type f          # 只查找文件\nfind /var -type d          # 只查找目录\nfind /var -type l          # 只查找链接\n\n# 按大小查找\nfind /home -size +100M     # 大于 100MB\nfind /home -size -1M       # 小于 1MB\nfind /home -size 50M       # 等于 50MB\n\n# 按时间查找\nfind /var -mtime -7        # 7 天内修改过\nfind /var -mtime +30       # 30 天前修改的\nfind /var -atime -1        # 1 天内访问过\n\n# 按权限查找\nfind /home -perm 755       # 权限为 755\nfind /home -perm -u+x      # 所有者有执行权限\n\n# 按用户/组查找\nfind /home -user username\nfind /home -group groupname\n\n# 组合条件\nfind /var -type f -name \"*.log\" -size +10M\n\n# 找到后执行操作\nfind /tmp -name \"*.tmp\" -exec rm {} \\;     # 删除找到的文件\nfind /home -name \"*.txt\" -exec ls -l {} \\; # 列出详情\n\n# locate 命令 - 快速查找（需要先更新数据库）\nsudo updatedb              # 更新文件数据库\nlocate filename            # 快速查找\n\n# which 命令 - 查找可执行文件位置\nwhich python\n\n# whereis 命令 - 查找命令的二进制、源码、手册位置\nwhereis nginx\n```\n\n### 2.8 链接文件\n\n```bash\n# 硬链接（指向相同的 inode）\nln source.txt hardlink.txt\n\n# 软链接/符号链接（类似快捷方式）\nln -s /path/to/source.txt symlink.txt\n\n# 查看链接指向\nls -l symlink.txt\n\n# 软链接 vs 硬链接\n# 软链接：可以跨文件系统，可以链接目录，源文件删除后失效\n# 硬链接：不能跨文件系统，不能链接目录，源文件删除后仍有效\n```\n\n---\n\n## 3. 文件内容查看与编辑\n\n### 3.1 查看文件内容\n\n```bash\n# 显示整个文件\ncat filename.txt\n\n# 带行号显示\ncat -n filename.txt\n\n# 合并多个文件\ncat file1.txt file2.txt > combined.txt\n\n# 分页查看（适合大文件）\nless filename.txt\n# 操作：空格下一页，b 上一页，/ 搜索，q 退出\n\nmore filename.txt\n# 操作：空格下一页，q 退出\n\n# 查看文件头部\nhead filename.txt          # 默认显示前 10 行\nhead -n 20 filename.txt    # 显示前 20 行\nhead -c 100 filename.txt   # 显示前 100 字节\n\n# 查看文件尾部\ntail filename.txt          # 默认显示后 10 行\ntail -n 20 filename.txt    # 显示后 20 行\ntail -f filename.txt       # 实时跟踪文件变化（常用于查看日志）\ntail -F filename.txt       # 同上，但文件不存在时会重试\n\n# 实时查看多个日志\ntail -f log1.txt log2.txt\n```\n\n### 3.2 文本编辑器\n\n#### Nano（适合初学者）\n\n```bash\n# 打开/创建文件\nnano filename.txt\n\n# 常用快捷键\n# Ctrl + O    保存文件\n# Ctrl + X    退出\n# Ctrl + K    剪切当前行\n# Ctrl + U    粘贴\n# Ctrl + W    搜索\n# Ctrl + G    帮助\n```\n\n#### Vim（强大但学习曲线陡峭）\n\n```bash\n# 打开文件\nvim filename.txt\n\n# Vim 模式\n# 普通模式（默认）- 导航和命令\n# 插入模式（i）   - 编辑文本\n# 命令模式（:）   - 执行命令\n\n# 基本操作\ni                    # 进入插入模式\nEsc                  # 返回普通模式\n:w                   # 保存\n:q                   # 退出\n:wq 或 :x            # 保存并退出\n:q!                  # 强制退出（不保存）\n\n# 普通模式下的操作\nh j k l              # 左 下 上 右 移动\ngg                   # 跳到文件开头\nG                    # 跳到文件末尾\ndd                   # 删除当前行\nyy                   # 复制当前行\np                    # 粘贴\nu                    # 撤销\nCtrl + r             # 重做\n/keyword             # 搜索\nn                    # 下一个搜索结果\nN                    # 上一个搜索结果\n:%s/old/new/g        # 全局替换\n:set number          # 显示行号\n```\n\n### 3.3 文本处理工具\n\n```bash\n# grep - 文本搜索\ngrep \"pattern\" filename.txt\ngrep -i \"pattern\" file.txt     # 忽略大小写\ngrep -r \"pattern\" directory/   # 递归搜索\ngrep -n \"pattern\" file.txt     # 显示行号\ngrep -v \"pattern\" file.txt     # 反向匹配（不包含）\ngrep -c \"pattern\" file.txt     # 统计匹配行数\ngrep -l \"pattern\" *.txt        # 只显示文件名\ngrep -E \"regex\" file.txt       # 使用扩展正则表达式\n\n# 示例\ngrep -rn \"error\" /var/log/     # 在日志目录搜索 error\n\n# sed - 流编辑器\nsed 's/old/new/' file.txt           # 替换每行第一个匹配\nsed 's/old/new/g' file.txt          # 替换所有匹配\nsed -i 's/old/new/g' file.txt       # 直接修改文件\nsed -n '5,10p' file.txt             # 打印第 5-10 行\nsed '3d' file.txt                   # 删除第 3 行\nsed '/pattern/d' file.txt           # 删除匹配行\n\n# awk - 文本处理\nawk '{print $1}' file.txt           # 打印第一列\nawk '{print $1, $3}' file.txt       # 打印第一和第三列\nawk -F: '{print $1}' /etc/passwd    # 指定分隔符\nawk 'NR==5' file.txt                # 打印第 5 行\nawk '/pattern/' file.txt            # 打印匹配行\nawk '{sum+=$1} END {print sum}'     # 求和\n\n# cut - 剪切文本\ncut -d: -f1 /etc/passwd             # 以 : 分隔，取第一列\ncut -c1-10 file.txt                 # 取每行前 10 个字符\n\n# sort - 排序\nsort file.txt                       # 字母排序\nsort -n file.txt                    # 数字排序\nsort -r file.txt                    # 逆序\nsort -u file.txt                    # 去重排序\nsort -t: -k3 -n /etc/passwd         # 按第三列数字排序\n\n# uniq - 去重（需要先排序）\nsort file.txt | uniq                # 去重\nsort file.txt | uniq -c             # 统计重复次数\nsort file.txt | uniq -d             # 只显示重复行\n\n# wc - 统计\nwc file.txt                         # 行数 词数 字节数\nwc -l file.txt                      # 只统计行数\nwc -w file.txt                      # 只统计词数\nwc -c file.txt                      # 只统计字节数\n\n# diff - 比较文件\ndiff file1.txt file2.txt            # 比较两个文件\ndiff -u file1.txt file2.txt         # unified 格式（更易读）\ndiff -r dir1/ dir2/                 # 比较两个目录\n```\n\n### 3.4 重定向与管道\n\n```bash\n# 输出重定向\ncommand > file.txt          # 覆盖写入\ncommand >> file.txt         # 追加写入\n\n# 输入重定向\ncommand < file.txt\n\n# 错误重定向\ncommand 2> error.log        # 错误输出到文件\ncommand 2>&1                # 错误合并到标准输出\ncommand &> all.log          # 标准输出和错误都写入文件\n\n# 管道 - 将一个命令的输出作为另一个命令的输入\nls -la | grep \".txt\"\ncat file.txt | sort | uniq\nps aux | grep nginx | awk '{print $2}'\n\n# 示例：查找大文件\nfind / -type f -size +100M 2>/dev/null | head -20\n\n# tee - 同时输出到屏幕和文件\ncommand | tee output.txt\ncommand | tee -a output.txt     # 追加模式\n```\n\n---\n\n## 4. 用户与权限管理\n\n### 4.1 用户管理\n\n```bash\n# 查看当前用户\nwhoami\n\n# 查看用户信息\nid                          # 当前用户\nid username                 # 指定用户\n\n# 查看所有用户\ncat /etc/passwd\n\n# 切换用户\nsu username                 # 切换用户\nsu - username               # 切换用户并加载环境变量\nsu -                        # 切换到 root\nexit                        # 退出当前用户\n\n# 以 root 权限执行命令\nsudo command\nsudo -i                     # 进入 root shell\n\n# 创建用户\nsudo useradd username\nsudo useradd -m username               # 同时创建主目录\nsudo useradd -m -s /bin/bash username  # 指定 shell\n\n# 设置密码\nsudo passwd username\n\n# 修改用户\nsudo usermod -aG groupname username    # 添加到组\nsudo usermod -s /bin/zsh username      # 修改 shell\nsudo usermod -d /new/home username     # 修改主目录\n\n# 删除用户\nsudo userdel username\nsudo userdel -r username               # 同时删除主目录\n\n# 查看登录用户\nwho\nw\nlast                        # 登录历史\n```\n\n### 4.2 组管理\n\n```bash\n# 查看所有组\ncat /etc/group\n\n# 查看用户所属组\ngroups\ngroups username\n\n# 创建组\nsudo groupadd groupname\n\n# 删除组\nsudo groupdel groupname\n\n# 将用户添加到组\nsudo usermod -aG groupname username\nsudo gpasswd -a username groupname\n\n# 从组中移除用户\nsudo gpasswd -d username groupname\n```\n\n### 4.3 文件权限\n\n```bash\n# 权限类型\n# r (read)    = 4  读\n# w (write)   = 2  写\n# x (execute) = 1  执行\n\n# 权限对象\n# u (user)    所有者\n# g (group)   所属组\n# o (others)  其他用户\n# a (all)     所有\n\n# 查看权限\nls -l filename.txt\n# -rwxr-xr-x\n#  │││ │││ │││\n#  │││ │││ └┴┴ 其他用户权限 (r-x = 5)\n#  │││ └┴┴──── 组权限 (r-x = 5)\n#  └┴┴──────── 所有者权限 (rwx = 7)\n\n# chmod - 修改权限\n# 数字模式\nchmod 755 filename          # rwxr-xr-x\nchmod 644 filename          # rw-r--r--\nchmod 600 filename          # rw-------\n\n# 符号模式\nchmod u+x filename          # 所有者添加执行权限\nchmod g-w filename          # 组移除写权限\nchmod o=r filename          # 其他用户只读\nchmod a+x filename          # 所有人添加执行权限\nchmod u=rwx,g=rx,o=rx file  # 等同于 755\n\n# 递归修改\nchmod -R 755 directory/\n\n# chown - 修改所有者\nsudo chown username filename\nsudo chown username:groupname filename\nsudo chown -R username:groupname directory/\n\n# chgrp - 修改所属组\nsudo chgrp groupname filename\n```\n\n### 4.4 特殊权限\n\n```bash\n# SUID (Set User ID) - 4\n# 执行时以文件所有者身份运行\nchmod u+s filename\nchmod 4755 filename\n\n# SGID (Set Group ID) - 2\n# 执行时以文件所属组身份运行\n# 目录设置后，新建文件继承目录的组\nchmod g+s directory/\nchmod 2755 directory/\n\n# Sticky Bit - 1\n# 目录设置后，只有所有者能删除文件\nchmod +t directory/\nchmod 1755 directory/\n\n# 查看特殊权限\nls -l /usr/bin/passwd       # -rwsr-xr-x (s 表示 SUID)\nls -ld /tmp                 # drwxrwxrwt (t 表示 Sticky)\n```\n\n### 4.5 sudo 配置\n\n```bash\n# 编辑 sudo 配置\nsudo visudo\n\n# 常见配置示例\n# 允许用户执行所有命令\nusername ALL=(ALL:ALL) ALL\n\n# 允许用户免密码执行 sudo\nusername ALL=(ALL) NOPASSWD: ALL\n\n# 允许组成员执行 sudo\n%groupname ALL=(ALL:ALL) ALL\n```\n\n---\n\n## 5. 软件包管理\n\n### 5.1 APT（Debian/Ubuntu）\n\n```bash\n# 更新软件包列表\nsudo apt update\n\n# 升级所有软件包\nsudo apt upgrade\nsudo apt full-upgrade       # 完整升级（可能移除包）\n\n# 安装软件\nsudo apt install package_name\nsudo apt install package1 package2\n\n# 卸载软件\nsudo apt remove package_name      # 保留配置\nsudo apt purge package_name       # 删除配置\nsudo apt autoremove               # 删除不需要的依赖\n\n# 搜索软件\napt search keyword\napt show package_name             # 显示详情\n\n# 列出已安装软件\napt list --installed\n\n# 清理缓存\nsudo apt clean\nsudo apt autoclean\n```\n\n### 5.2 YUM/DNF（CentOS/RHEL/Fedora）\n\n```bash\n# DNF 是 YUM 的继任者，命令类似\n\n# 更新软件包列表\nsudo yum check-update\nsudo dnf check-update\n\n# 升级所有软件包\nsudo yum update\nsudo dnf upgrade\n\n# 安装软件\nsudo yum install package_name\nsudo dnf install package_name\n\n# 卸载软件\nsudo yum remove package_name\nsudo dnf remove package_name\n\n# 搜索软件\nyum search keyword\ndnf search keyword\n\n# 列出已安装软件\nyum list installed\ndnf list installed\n\n# 清理缓存\nsudo yum clean all\nsudo dnf clean all\n```\n\n### 5.3 其他包管理\n\n```bash\n# Snap（通用）\nsudo snap install package_name\nsudo snap remove package_name\nsnap list\n\n# Flatpak（通用）\nflatpak install package_name\nflatpak uninstall package_name\nflatpak list\n\n# dpkg（Debian 底层工具）\nsudo dpkg -i package.deb          # 安装 .deb 包\nsudo dpkg -r package_name         # 卸载\ndpkg -l                           # 列出已安装\ndpkg -L package_name              # 列出包内文件\n\n# rpm（Red Hat 底层工具）\nsudo rpm -ivh package.rpm         # 安装\nsudo rpm -e package_name          # 卸载\nrpm -qa                           # 列出已安装\nrpm -ql package_name              # 列出包内文件\n```\n\n### 5.4 从源码编译安装\n\n```bash\n# 典型步骤\n# 1. 下载源码\nwget https://example.com/software.tar.gz\ntar -xzf software.tar.gz\ncd software/\n\n# 2. 配置\n./configure\n./configure --prefix=/usr/local/software\n\n# 3. 编译\nmake\nmake -j$(nproc)     # 使用所有 CPU 核心\n\n# 4. 安装\nsudo make install\n\n# 5. 卸载（如果支持）\nsudo make uninstall\n```\n\n---\n\n## 6. 进程管理\n\n### 6.1 查看进程\n\n```bash\n# ps - 显示进程\nps                          # 当前终端进程\nps aux                      # 所有进程（详细）\nps -ef                      # 所有进程（完整格式）\n\n# ps aux 输出解读\n# USER  PID %CPU %MEM  VSZ   RSS TTY STAT START TIME COMMAND\n# root    1  0.0  0.1 16844  1234 ?   Ss   Jan01 0:05 /sbin/init\n\n# 常用组合\nps aux | grep nginx         # 查找 nginx 进程\nps -ef --forest             # 显示进程树\n\n# pstree - 进程树\npstree\npstree -p                   # 显示 PID\n\n# top - 实时监控\ntop\n\n# top 快捷键\n# q        退出\n# P        按 CPU 排序\n# M        按内存排序\n# k        杀死进程\n# 1        显示每个 CPU\n# h        帮助\n\n# htop - 更友好的监控（需安装）\nsudo apt install htop\nhtop\n\n# 查看特定进程\npgrep nginx                 # 按名称查找 PID\npidof nginx                 # 同上\n```\n\n### 6.2 进程控制\n\n```bash\n# 前台/后台运行\ncommand &                   # 后台运行\nCtrl + Z                    # 暂停当前进程\nbg                          # 将暂停的进程放到后台\nfg                          # 将后台进程调到前台\njobs                        # 查看后台任务\nfg %1                       # 将任务 1 调到前台\n\n# nohup - 忽略挂断信号（终端关闭后继续运行）\nnohup command &\nnohup command > output.log 2>&1 &\n\n# 终止进程\nkill PID                    # 发送 SIGTERM（优雅终止）\nkill -9 PID                 # 发送 SIGKILL（强制终止）\nkill -15 PID                # 同 SIGTERM\nkillall process_name        # 按名称终止\npkill process_name          # 按名称终止（支持模式）\n\n# 常用信号\n# SIGTERM (15) - 请求终止，可被捕获\n# SIGKILL (9)  - 强制终止，不可捕获\n# SIGHUP (1)   - 挂断信号，常用于重新加载配置\n# SIGINT (2)   - 中断，等同于 Ctrl+C\n\n# 示例\nkill -HUP $(pgrep nginx)    # 重新加载 nginx 配置\n```\n\n### 6.3 系统服务管理（systemd）\n\n```bash\n# 查看服务状态\nsudo systemctl status nginx\n\n# 启动/停止/重启\nsudo systemctl start nginx\nsudo systemctl stop nginx\nsudo systemctl restart nginx\nsudo systemctl reload nginx     # 重新加载配置\n\n# 开机启动\nsudo systemctl enable nginx     # 开机启动\nsudo systemctl disable nginx    # 取消开机启动\n\n# 查看所有服务\nsystemctl list-units --type=service\nsystemctl list-units --type=service --state=running\n\n# 查看启动日志\njournalctl -u nginx\njournalctl -u nginx -f          # 实时跟踪\njournalctl -u nginx --since \"1 hour ago\"\n```\n\n### 6.4 资源限制\n\n```bash\n# ulimit - 用户资源限制\nulimit -a                   # 查看所有限制\nulimit -n                   # 最大打开文件数\nulimit -n 65535             # 设置最大打开文件数\n\n# 永久设置（编辑 /etc/security/limits.conf）\n# username soft nofile 65535\n# username hard nofile 65535\n```\n\n---\n\n## 7. 网络配置与管理\n\n### 7.1 网络信息查看\n\n```bash\n# ip 命令（推荐）\nip addr                     # 查看 IP 地址\nip addr show eth0           # 查看指定网卡\nip link                     # 查看网络接口\nip route                    # 查看路由表\nip neigh                    # 查看 ARP 表\n\n# ifconfig（旧命令，部分系统需安装 net-tools）\nifconfig\nifconfig eth0\n\n# 查看网关\nip route | grep default\n\n# 查看 DNS\ncat /etc/resolv.conf\n\n# 查看主机名\nhostname\nhostnamectl\n\n# 修改主机名\nsudo hostnamectl set-hostname newhostname\n```\n\n### 7.2 网络连接测试\n\n```bash\n# ping - 测试连通性\nping google.com\nping -c 4 google.com        # 只 ping 4 次\nping -i 2 google.com        # 每 2 秒 ping 一次\n\n# traceroute - 追踪路由\ntraceroute google.com\ntraceroute -n google.com    # 不解析主机名\n\n# mtr - 结合 ping 和 traceroute\nmtr google.com\n\n# 查看端口连接\nss -tuln                    # TCP/UDP 监听端口\nss -tunp                    # 包含进程信息\nnetstat -tuln               # 旧命令\n\n# 测试端口连通性\nnc -zv hostname 80          # 测试 TCP 端口\nnc -zvu hostname 53         # 测试 UDP 端口\ntelnet hostname 80\n\n# curl - HTTP 请求\ncurl https://example.com\ncurl -I https://example.com         # 只显示头部\ncurl -o file.html https://example.com\ncurl -O https://example.com/file.zip\ncurl -X POST -d \"data\" https://api.example.com\n\n# wget - 下载文件\nwget https://example.com/file.zip\nwget -c https://example.com/file.zip    # 断点续传\nwget -r https://example.com             # 递归下载\n\n# DNS 查询\nnslookup google.com\ndig google.com\ndig @8.8.8.8 google.com     # 指定 DNS 服务器\nhost google.com\n```\n\n### 7.3 网络配置\n\n```bash\n# Ubuntu (Netplan)\n# 配置文件：/etc/netplan/*.yaml\n\n# 示例配置\nsudo nano /etc/netplan/01-netcfg.yaml\n```\n\n```yaml\nnetwork:\n  version: 2\n  ethernets:\n    eth0:\n      dhcp4: true\n    eth1:\n      addresses:\n        - 192.168.1.100/24\n      gateway4: 192.168.1.1\n      nameservers:\n        addresses:\n          - 8.8.8.8\n          - 8.8.4.4\n```\n\n```bash\n# 应用配置\nsudo netplan apply\n\n# CentOS (NetworkManager)\n# 配置文件：/etc/sysconfig/network-scripts/ifcfg-*\n\n# 使用 nmcli\nnmcli device status\nnmcli connection show\nnmcli connection modify \"连接名\" ipv4.addresses 192.168.1.100/24\nnmcli connection up \"连接名\"\n```\n\n### 7.4 防火墙\n\n```bash\n# UFW (Ubuntu 推荐)\nsudo ufw status\nsudo ufw enable\nsudo ufw disable\n\n# 允许/拒绝端口\nsudo ufw allow 22\nsudo ufw allow 80/tcp\nsudo ufw deny 23\nsudo ufw delete allow 80\n\n# 允许特定 IP\nsudo ufw allow from 192.168.1.100\nsudo ufw allow from 192.168.1.0/24 to any port 22\n\n# firewalld (CentOS/RHEL)\nsudo systemctl start firewalld\nsudo firewall-cmd --state\n\n# 开放端口\nsudo firewall-cmd --add-port=80/tcp --permanent\nsudo firewall-cmd --add-service=http --permanent\nsudo firewall-cmd --reload\n\n# 查看规则\nsudo firewall-cmd --list-all\n\n# iptables（底层工具）\nsudo iptables -L -n                     # 查看规则\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\nsudo iptables -A INPUT -s 192.168.1.100 -j DROP\nsudo iptables-save > /etc/iptables.rules\n```\n\n---\n\n## 8. 磁盘与存储管理\n\n### 8.1 磁盘信息查看\n\n```bash\n# 查看磁盘分区\nlsblk\nlsblk -f                    # 显示文件系统\n\n# 查看磁盘使用情况\ndf -h                       # 人性化显示\ndf -Th                      # 包含文件系统类型\n\n# 查看目录大小\ndu -sh /path/to/directory\ndu -h --max-depth=1 /home   # 显示一级子目录大小\ndu -h /home | sort -rh | head -20  # 按大小排序\n\n# 查看磁盘详情\nsudo fdisk -l\nsudo parted -l\n\n# 查看磁盘健康状态\nsudo smartctl -a /dev/sda\n```\n\n### 8.2 分区管理\n\n```bash\n# fdisk - MBR 分区\nsudo fdisk /dev/sdb\n\n# fdisk 操作\n# m - 显示帮助\n# p - 打印分区表\n# n - 新建分区\n# d - 删除分区\n# t - 修改分区类型\n# w - 保存并退出\n# q - 不保存退出\n\n# parted - GPT 分区\nsudo parted /dev/sdb\n\n# parted 操作\n# print     - 显示分区表\n# mklabel gpt - 创建 GPT 分区表\n# mkpart primary ext4 0% 100% - 创建分区\n# rm 1      - 删除分区 1\n# quit      - 退出\n```\n\n### 8.3 文件系统\n\n```bash\n# 格式化\nsudo mkfs.ext4 /dev/sdb1\nsudo mkfs.xfs /dev/sdb1\nsudo mkfs.ntfs /dev/sdb1\n\n# 挂载\nsudo mount /dev/sdb1 /mnt/data\nsudo mount -t ntfs-3g /dev/sdb1 /mnt/windows\nsudo mount -o loop image.iso /mnt/iso     # 挂载 ISO\n\n# 卸载\nsudo umount /mnt/data\nsudo umount -l /mnt/data    # 延迟卸载（处理忙碌的挂载点）\n\n# 查看挂载\nmount | grep sdb\n\n# 永久挂载（编辑 /etc/fstab）\nsudo nano /etc/fstab\n\n# fstab 格式\n# 设备                挂载点      类型    选项            dump  pass\n# /dev/sdb1          /mnt/data   ext4    defaults        0     2\n# UUID=xxx           /mnt/data   ext4    defaults        0     2\n\n# 获取 UUID\nsudo blkid\n\n# 测试 fstab\nsudo mount -a\n\n# 文件系统检查\nsudo fsck /dev/sdb1\nsudo fsck.ext4 -y /dev/sdb1\n```\n\n### 8.4 LVM（逻辑卷管理）\n\n```bash\n# 创建物理卷\nsudo pvcreate /dev/sdb /dev/sdc\nsudo pvs                    # 查看物理卷\n\n# 创建卷组\nsudo vgcreate myvg /dev/sdb /dev/sdc\nsudo vgs                    # 查看卷组\n\n# 创建逻辑卷\nsudo lvcreate -n mylv -L 10G myvg\nsudo lvcreate -n mylv -l 100%FREE myvg  # 使用所有空间\nsudo lvs                    # 查看逻辑卷\n\n# 格式化并挂载\nsudo mkfs.ext4 /dev/myvg/mylv\nsudo mount /dev/myvg/mylv /mnt/data\n\n# 扩展逻辑卷\nsudo lvextend -L +5G /dev/myvg/mylv\nsudo resize2fs /dev/myvg/mylv       # ext4 扩展文件系统\nsudo xfs_growfs /mnt/data           # xfs 扩展文件系统\n```\n\n### 8.5 SWAP 管理\n\n```bash\n# 查看 swap\nfree -h\nswapon --show\n\n# 创建 swap 文件\nsudo fallocate -l 4G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n\n# 永久生效（添加到 /etc/fstab）\n# /swapfile none swap sw 0 0\n\n# 关闭 swap\nsudo swapoff /swapfile\nsudo swapoff -a             # 关闭所有 swap\n```\n\n---\n\n## 9. 系统信息查看\n\n### 9.1 系统基本信息\n\n```bash\n# 系统版本\ncat /etc/os-release\nlsb_release -a\nuname -a                    # 内核信息\nuname -r                    # 内核版本\n\n# 主机信息\nhostnamectl\n\n# 运行时间\nuptime\n\n# 系统时间\ndate\ntimedatectl\n\n# 设置时区\nsudo timedatectl set-timezone Asia/Shanghai\n```\n\n### 9.2 硬件信息\n\n```bash\n# CPU 信息\nlscpu\ncat /proc/cpuinfo\nnproc                       # CPU 核心数\n\n# 内存信息\nfree -h\ncat /proc/meminfo\n\n# 磁盘信息\nlsblk\nsudo fdisk -l\n\n# PCI 设备\nlspci\nlspci -v                    # 详细信息\n\n# USB 设备\nlsusb\n\n# 所有硬件信息\nsudo lshw\nsudo lshw -short\nsudo dmidecode              # BIOS/主板信息\n```\n\n### 9.3 资源监控\n\n```bash\n# 实时监控\ntop\nhtop\nvmstat 1                    # 每秒刷新\niostat 1                    # IO 统计\n\n# 内存使用\nfree -h\nvmstat -s\n\n# CPU 使用\nmpstat 1\nsar -u 1 5                  # 5 次，每秒一次\n\n# IO 使用\niostat -x 1\niotop                       # 需安装\n\n# 网络流量\niftop                       # 需安装\nnethogs                     # 按进程显示\nvnstat                      # 流量统计\n\n# 综合监控工具\nglances                     # 需安装\nnmon                        # 需安装\n```\n\n### 9.4 日志查看\n\n```bash\n# 系统日志\nsudo journalctl\nsudo journalctl -f          # 实时跟踪\nsudo journalctl -b          # 本次启动\nsudo journalctl -b -1       # 上次启动\nsudo journalctl --since \"1 hour ago\"\nsudo journalctl -p err      # 错误级别\n\n# 传统日志文件\n/var/log/syslog             # 系统日志（Debian/Ubuntu）\n/var/log/messages           # 系统日志（CentOS/RHEL）\n/var/log/auth.log           # 认证日志\n/var/log/dmesg              # 内核启动日志\n/var/log/kern.log           # 内核日志\n/var/log/apt/               # APT 日志\n/var/log/nginx/             # Nginx 日志\n\n# 查看日志\nsudo tail -f /var/log/syslog\nsudo tail -100 /var/log/auth.log\nsudo grep \"error\" /var/log/syslog\n```\n\n---\n\n## 10. 压缩与解压\n\n### 10.1 tar（归档工具）\n\n```bash\n# 创建归档\ntar -cvf archive.tar files/           # 只归档，不压缩\ntar -czvf archive.tar.gz files/       # gzip 压缩\ntar -cjvf archive.tar.bz2 files/      # bzip2 压缩\ntar -cJvf archive.tar.xz files/       # xz 压缩\n\n# 解压\ntar -xvf archive.tar                  # 解包\ntar -xzvf archive.tar.gz              # 解压 gzip\ntar -xjvf archive.tar.bz2             # 解压 bzip2\ntar -xJvf archive.tar.xz              # 解压 xz\n\n# 解压到指定目录\ntar -xzvf archive.tar.gz -C /path/to/directory/\n\n# 查看内容（不解压）\ntar -tvf archive.tar.gz\n\n# 常用选项\n# c - 创建归档\n# x - 解压归档\n# v - 显示详情\n# f - 指定文件名\n# z - gzip 压缩\n# j - bzip2 压缩\n# J - xz 压缩\n# t - 列出内容\n# C - 指定目录\n```\n\n### 10.2 gzip/gunzip\n\n```bash\n# 压缩（原文件会被删除）\ngzip filename\ngzip -k filename            # 保留原文件\ngzip -9 filename            # 最高压缩率\n\n# 解压\ngunzip filename.gz\ngzip -d filename.gz\n\n# 查看压缩文件内容\nzcat filename.gz\nzless filename.gz\n```\n\n### 10.3 zip/unzip\n\n```bash\n# 压缩\nzip archive.zip file1 file2\nzip -r archive.zip directory/\n\n# 解压\nunzip archive.zip\nunzip archive.zip -d /path/to/directory/\n\n# 查看内容\nunzip -l archive.zip\n\n# 解压特定文件\nunzip archive.zip file.txt\n```\n\n### 10.4 其他压缩工具\n\n```bash\n# bzip2\nbzip2 filename\nbunzip2 filename.bz2\n\n# xz\nxz filename\nunxz filename.xz\n\n# 7z（需安装 p7zip）\n7z a archive.7z files/\n7z x archive.7z\n\n# rar（需安装）\nrar a archive.rar files/\nunrar x archive.rar\n```\n\n---\n\n## 11. Shell 脚本基础\n\n### 11.1 基本结构\n\n```bash\n#!/bin/bash\n# 这是注释\n\n# 变量\nname=\"Linux\"\necho \"Hello, $name\"\necho \"Hello, ${name}!\"\n\n# 读取输入\nread -p \"请输入你的名字: \" username\necho \"你好, $username\"\n\n# 命令替换\ntoday=$(date +%Y-%m-%d)\nfiles=`ls -la`\n\n# 算术运算\na=10\nb=5\nsum=$((a + b))\necho \"Sum: $sum\"\n```\n\n### 11.2 条件判断\n\n```bash\n#!/bin/bash\n\n# if 语句\nif [ \"$1\" = \"hello\" ]; then\n    echo \"Hello!\"\nelif [ \"$1\" = \"bye\" ]; then\n    echo \"Goodbye!\"\nelse\n    echo \"Unknown\"\nfi\n\n# 数字比较\n# -eq 等于，-ne 不等于\n# -gt 大于，-lt 小于\n# -ge 大于等于，-le 小于等于\n\nif [ $a -gt $b ]; then\n    echo \"a > b\"\nfi\n\n# 字符串比较\n# = 或 == 相等，!= 不等\n# -z 为空，-n 不为空\n\nif [ -z \"$str\" ]; then\n    echo \"字符串为空\"\nfi\n\n# 文件测试\n# -e 存在，-f 是文件，-d 是目录\n# -r 可读，-w 可写，-x 可执行\n# -s 大小不为零\n\nif [ -f \"/etc/passwd\" ]; then\n    echo \"文件存在\"\nfi\n\n# 逻辑运算\n# && 与，|| 或，! 非\n\nif [ -f \"$file\" ] && [ -r \"$file\" ]; then\n    echo \"文件存在且可读\"\nfi\n\n# case 语句\ncase \"$1\" in\n    start)\n        echo \"Starting...\"\n        ;;\n    stop)\n        echo \"Stopping...\"\n        ;;\n    restart)\n        echo \"Restarting...\"\n        ;;\n    *)\n        echo \"Usage: $0 {start|stop|restart}\"\n        ;;\nesac\n```\n\n### 11.3 循环\n\n```bash\n#!/bin/bash\n\n# for 循环\nfor i in 1 2 3 4 5; do\n    echo \"Number: $i\"\ndone\n\nfor file in *.txt; do\n    echo \"Processing: $file\"\ndone\n\nfor ((i=0; i<10; i++)); do\n    echo \"Count: $i\"\ndone\n\n# while 循环\ncount=0\nwhile [ $count -lt 5 ]; do\n    echo \"Count: $count\"\n    ((count++))\ndone\n\n# 读取文件\nwhile IFS= read -r line; do\n    echo \"$line\"\ndone < file.txt\n\n# until 循环\nuntil [ $count -ge 10 ]; do\n    echo \"Count: $count\"\n    ((count++))\ndone\n\n# break 和 continue\nfor i in {1..10}; do\n    if [ $i -eq 5 ]; then\n        continue\n    fi\n    if [ $i -eq 8 ]; then\n        break\n    fi\n    echo $i\ndone\n```\n\n### 11.4 函数\n\n```bash\n#!/bin/bash\n\n# 定义函数\nfunction greet() {\n    echo \"Hello, $1!\"\n}\n\n# 另一种定义方式\nsay_bye() {\n    local name=$1      # 局部变量\n    echo \"Goodbye, $name!\"\n    return 0           # 返回值\n}\n\n# 调用函数\ngreet \"World\"\nsay_bye \"Linux\"\n\n# 获取返回值\nif say_bye \"User\"; then\n    echo \"函数执行成功\"\nfi\n```\n\n### 11.5 实用脚本示例\n\n```bash\n#!/bin/bash\n# 备份脚本\n\n# 配置\nBACKUP_DIR=\"/backup\"\nSOURCE_DIR=\"/var/www\"\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_FILE=\"$BACKUP_DIR/backup_$DATE.tar.gz\"\n\n# 检查目录\nif [ ! -d \"$BACKUP_DIR\" ]; then\n    mkdir -p \"$BACKUP_DIR\"\nfi\n\n# 执行备份\necho \"开始备份: $SOURCE_DIR\"\ntar -czvf \"$BACKUP_FILE\" \"$SOURCE_DIR\"\n\nif [ $? -eq 0 ]; then\n    echo \"备份成功: $BACKUP_FILE\"\nelse\n    echo \"备份失败!\"\n    exit 1\nfi\n\n# 清理旧备份（保留最近 7 天）\nfind \"$BACKUP_DIR\" -name \"backup_*.tar.gz\" -mtime +7 -delete\necho \"清理完成\"\n```\n\n---\n\n## 12. 定时任务\n\n### 12.1 crontab\n\n```bash\n# 编辑定时任务\ncrontab -e\n\n# 查看定时任务\ncrontab -l\n\n# 删除所有定时任务\ncrontab -r\n\n# crontab 格式\n# 分 时 日 月 周 命令\n# *  *  *  *  *  command\n\n# 字段说明\n# 分钟 (0-59)\n# 小时 (0-23)\n# 日期 (1-31)\n# 月份 (1-12)\n# 星期 (0-7，0 和 7 都是周日)\n\n# 特殊字符\n# *     任意值\n# ,     列表（1,3,5）\n# -     范围（1-5）\n# /     步长（*/5 表示每 5 分钟）\n\n# 示例\n# 每分钟执行\n* * * * * /path/to/script.sh\n\n# 每小时的第 30 分钟执行\n30 * * * * /path/to/script.sh\n\n# 每天凌晨 2 点执行\n0 2 * * * /path/to/script.sh\n\n# 每周一到周五的 9 点执行\n0 9 * * 1-5 /path/to/script.sh\n\n# 每隔 5 分钟执行\n*/5 * * * * /path/to/script.sh\n\n# 每月 1 日和 15 日执行\n0 0 1,15 * * /path/to/script.sh\n\n# 预定义时间\n@reboot     # 启动时执行\n@yearly     # 每年（0 0 1 1 *）\n@monthly    # 每月（0 0 1 * *）\n@weekly     # 每周（0 0 * * 0）\n@daily      # 每天（0 0 * * *）\n@hourly     # 每小时（0 * * * *）\n\n# 输出处理\n0 2 * * * /path/to/script.sh > /var/log/script.log 2>&1\n0 2 * * * /path/to/script.sh >> /var/log/script.log 2>&1\n```\n\n### 12.2 systemd timer\n\n```bash\n# 创建服务文件\nsudo nano /etc/systemd/system/backup.service\n```\n\n```ini\n[Unit]\nDescription=Backup Service\n\n[Service]\nType=oneshot\nExecStart=/path/to/backup.sh\n```\n\n```bash\n# 创建 timer 文件\nsudo nano /etc/systemd/system/backup.timer\n```\n\n```ini\n[Unit]\nDescription=Daily Backup Timer\n\n[Timer]\nOnCalendar=*-*-* 02:00:00\nPersistent=true\n\n[Install]\nWantedBy=timers.target\n```\n\n```bash\n# 启用 timer\nsudo systemctl daemon-reload\nsudo systemctl enable backup.timer\nsudo systemctl start backup.timer\n\n# 查看 timer 状态\nsystemctl list-timers\n```\n\n### 12.3 at 命令（一次性任务）\n\n```bash\n# 在指定时间执行（一次性）\nat 10:30\nat> /path/to/script.sh\nat> Ctrl+D\n\n# 其他时间格式\nat now + 5 minutes\nat now + 2 hours\nat 4pm tomorrow\nat 2:00 Jan 28\n\n# 查看待执行任务\natq\n\n# 删除任务\natrm 任务编号\n```\n\n---\n\n## 13. SSH 远程连接\n\n### 13.1 SSH 客户端\n\n```bash\n# 基本连接\nssh username@hostname\nssh username@192.168.1.100\n\n# 指定端口\nssh -p 2222 username@hostname\n\n# 执行远程命令\nssh username@hostname \"ls -la\"\n\n# 详细输出（调试）\nssh -v username@hostname\n```\n\n### 13.2 SSH 密钥认证\n\n```bash\n# 生成密钥对\nssh-keygen -t rsa -b 4096\nssh-keygen -t ed25519        # 推荐，更安全\n\n# 按提示输入：\n# 保存位置（默认 ~/.ssh/id_rsa）\n# 密码短语（可选）\n\n# 复制公钥到服务器\nssh-copy-id username@hostname\nssh-copy-id -i ~/.ssh/id_ed25519.pub username@hostname\n\n# 手动复制\ncat ~/.ssh/id_ed25519.pub | ssh username@hostname \"mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys\"\n\n# 配置文件 ~/.ssh/config\nHost myserver\n    HostName 192.168.1.100\n    User admin\n    Port 22\n    IdentityFile ~/.ssh/id_ed25519\n\n# 使用配置\nssh myserver\n```\n\n### 13.3 文件传输\n\n```bash\n# SCP（基于 SSH 的复制）\nscp file.txt username@hostname:/path/to/destination/\nscp username@hostname:/path/to/file.txt ./\nscp -r directory/ username@hostname:/path/to/destination/\nscp -P 2222 file.txt username@hostname:/path/     # 指定端口\n\n# SFTP（SSH 文件传输协议）\nsftp username@hostname\nsftp> ls              # 远程目录\nsftp> lls             # 本地目录\nsftp> get file.txt    # 下载\nsftp> put file.txt    # 上传\nsftp> quit\n\n# rsync（增量同步）\nrsync -avz source/ username@hostname:/path/to/destination/\nrsync -avz username@hostname:/path/to/source/ ./destination/\n\n# rsync 常用选项\n# -a  归档模式（递归、保留属性）\n# -v  详细输出\n# -z  压缩传输\n# -P  显示进度 + 断点续传\n# --delete  删除目标中多余的文件\n```\n\n### 13.4 SSH 服务端配置\n\n```bash\n# 配置文件\nsudo nano /etc/ssh/sshd_config\n\n# 常用配置\nPort 22                          # SSH 端口\nPermitRootLogin no               # 禁止 root 登录\nPasswordAuthentication no        # 禁用密码登录\nPubkeyAuthentication yes         # 启用密钥登录\nAllowUsers user1 user2           # 只允许特定用户\n\n# 重启 SSH 服务\nsudo systemctl restart sshd\n```\n\n### 13.5 SSH 隧道\n\n```bash\n# 本地端口转发（访问远程内网服务）\nssh -L 8080:localhost:80 username@hostname\n# 本地 8080 -> 远程服务器 -> 远程 localhost:80\n\n# 远程端口转发（暴露本地服务）\nssh -R 8080:localhost:80 username@hostname\n# 远程 8080 -> 你的机器 -> 本地 localhost:80\n\n# 动态端口转发（SOCKS 代理）\nssh -D 1080 username@hostname\n# 可作为 SOCKS5 代理使用\n\n# 后台运行\nssh -fN -L 8080:localhost:80 username@hostname\n```\n\n---\n\n## 14. 常用技巧与快捷键\n\n### 14.1 终端快捷键\n\n```bash\n# 光标移动\nCtrl + A        # 移到行首\nCtrl + E        # 移到行尾\nCtrl + B        # 后移一字符\nCtrl + F        # 前移一字符\nAlt + B         # 后移一个单词\nAlt + F         # 前移一个单词\n\n# 编辑\nCtrl + U        # 删除到行首\nCtrl + K        # 删除到行尾\nCtrl + W        # 删除前一个单词\nAlt + D         # 删除后一个单词\nCtrl + Y        # 粘贴删除的内容\nCtrl + _        # 撤销\n\n# 控制\nCtrl + C        # 中断当前命令\nCtrl + Z        # 暂停当前命令\nCtrl + D        # 退出/EOF\nCtrl + L        # 清屏\nCtrl + S        # 暂停输出\nCtrl + Q        # 恢复输出\n\n# 历史\nCtrl + R        # 搜索历史命令\nCtrl + P / ↑    # 上一条命令\nCtrl + N / ↓    # 下一条命令\n!!              # 执行上一条命令\n!n              # 执行历史中第 n 条命令\n!string         # 执行最近以 string 开头的命令\n```\n\n### 14.2 命令历史\n\n```bash\n# 查看历史\nhistory\nhistory 20            # 最近 20 条\n\n# 执行历史命令\n!100                  # 执行第 100 条\n!!                    # 执行上一条\n!ssh                  # 执行最近的 ssh 命令\n!?keyword             # 执行包含 keyword 的命令\n\n# 修改并执行上一条命令\n^old^new              # 将 old 替换为 new\n\n# 清除历史\nhistory -c\n```\n\n### 14.3 别名\n\n```bash\n# 创建临时别名\nalias ll='ls -la'\nalias grep='grep --color=auto'\n\n# 删除别名\nunalias ll\n\n# 永久别名（添加到 ~/.bashrc 或 ~/.zshrc）\necho \"alias ll='ls -la'\" >> ~/.bashrc\nsource ~/.bashrc\n```\n\n### 14.4 环境变量\n\n```bash\n# 查看环境变量\nenv\nprintenv\necho $PATH\n\n# 设置临时环境变量\nexport MY_VAR=\"value\"\n\n# 永久环境变量\n# 用户级：~/.bashrc 或 ~/.profile\n# 系统级：/etc/environment 或 /etc/profile\n\n# 添加 PATH\nexport PATH=\"$PATH:/new/path\"\n```\n\n### 14.5 实用技巧\n\n```bash\n# 花括号展开\necho {1..10}              # 1 2 3 4 5 6 7 8 9 10\necho {a..z}               # a b c ... z\nmkdir dir_{1..5}          # 创建 dir_1 到 dir_5\n\n# 命令替换\necho \"Today is $(date)\"\necho \"Files: $(ls | wc -l)\"\n\n# 后台执行\nlong_running_command &\nnohup long_running_command &\n\n# 多命令执行\ncommand1 ; command2       # 顺序执行\ncommand1 && command2      # 前一个成功才执行\ncommand1 || command2      # 前一个失败才执行\n\n# xargs - 将输入转为参数\nfind . -name \"*.log\" | xargs rm\ncat urls.txt | xargs -n1 curl -O\n\n# watch - 定期执行命令\nwatch -n 5 df -h          # 每 5 秒执行一次\n\n# 计时\ntime command\n\n# 记录终端会话\nscript session.log        # 开始记录\nexit                      # 停止记录\n\n# 临时提升权限执行上一条命令\nsudo !!\n\n# 快速创建备份\ncp file.txt{,.bak}        # 复制为 file.txt.bak\n```\n\n---\n\n## 附录：常用命令速查表\n\n| 类别 | 命令 | 说明 |\n|------|------|------|\n| 文件操作 | `ls`, `cd`, `pwd`, `cp`, `mv`, `rm`, `mkdir`, `touch` | 基本文件操作 |\n| 文件内容 | `cat`, `less`, `head`, `tail`, `grep`, `find` | 查看和搜索 |\n| 编辑器 | `nano`, `vim` | 文本编辑 |\n| 权限 | `chmod`, `chown`, `chgrp` | 权限管理 |\n| 用户 | `useradd`, `userdel`, `passwd`, `su`, `sudo` | 用户管理 |\n| 软件包 | `apt`, `yum`, `dnf`, `snap` | 软件安装 |\n| 进程 | `ps`, `top`, `kill`, `systemctl` | 进程管理 |\n| 网络 | `ip`, `ping`, `curl`, `wget`, `ss` | 网络工具 |\n| 磁盘 | `df`, `du`, `mount`, `fdisk` | 磁盘管理 |\n| 压缩 | `tar`, `gzip`, `zip`, `unzip` | 压缩解压 |\n| 系统 | `uname`, `hostname`, `uptime`, `date` | 系统信息 |\n\n---"
  }
]